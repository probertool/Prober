% C S O U N D   5   A P I   R E F E R E N C E   M A N U A L 
% The manual is produced from 2 sources: this header document for new features and users' guide, 
% and autogenerated Doxygen LaTeX files for Csound API reference documentation. To produce the entire manual:
% 1. Run Doxygen in the csound5 directory. It will produce LaTeX output that includes the contents of this file,
%    as well as API documentation automatically generated from various Csound and CsoundVST header files.
% 2. Doxygen will produce a doc/csound/latex/refman.tex file. Run pdflatex on this file to generate csound.pdf. You can
%    also run tex4ht on this file to produce an HTML form of the manual. Be sure to run in a mode that skips right on past
%    all the hundreds of LaTeX errors!
% 3. Steps 1 and 3 are automated in SConstruct with the generatePdf=1 option.
\batchmode
\documentclass[letterpaper]{book}
\usepackage{makeidx}
\usepackage{fancyhdr}
\usepackage{graphicx}
\usepackage{multicol}
\usepackage{float}
\usepackage{textcomp}
\usepackage{alltt}
\usepackage{times}
\usepackage{ifpdf}
\ifpdf
\usepackage[pdftex,
            pagebackref=true,
            colorlinks=true,
            linkcolor=blue,
            unicode
           ]{hyperref}
\else
\usepackage[ps2pdf,
            pagebackref=true,
            colorlinks=true,
            linkcolor=blue,
            unicode
           ]{hyperref}
\usepackage{pspicture}
\fi
\usepackage[utf8]{inputenc}
\usepackage{doxygen}
\makeindex
\setcounter{tocdepth}{1}
\renewcommand{\footrulewidth}{0.4pt}
\begin{document}
\begin{titlepage}
\vspace*{7cm}
\begin{center}
{\Large Csound and CsoundAC API Reference}\\
\vspace*{1cm}
{\large Generated by Doxygen 1.5.5}\\
\vspace*{0.5cm}
{\small Sat Mar 1 22:26:05 2008}\\
\end{center}
\end{titlepage}
\clearemptydoublepage
\pagenumbering{roman}
\tableofcontents
\clearemptydoublepage
\pagenumbering{arabic}
\part{Licenses}
\chapter{Csound, CsoundAC, and CsoundVST}

Csound is \copyright 1991--2003 by Barry Vercoe and John ffitch.

CsoundAC and CsoundVST are \copyright 2001--2007 by Michael Gogins.

Csound and CsoundAC are free software; you can redistribute them and/or modify them under the terms of the GNU Lesser General Public License as published by the Free Software Foundation; either version 2.1 of the License, or (at your option) any later version.

Csound and CsoundAC are distributed in the hope that they will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Lesser General Public License for more details.

You should have received a copy of the GNU Lesser General Public License along with Csound and CsoundAC; if not, write to the Free Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA.

\chapter{Manual}

Permission is granted to copy, distribute and/or modify this document under the terms of the
GNU Free Documentation License, Version 1.2 or any later version published by the Free Software
Foundation; with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts. 

\part{Outline of the API}

\chapter{The Csound Application Programming Interfaces}

The Csound Application Programming Interface (API) reference is contained in the chapters following this one. The Csound API actually consists of several APIs:

\begin{itemize}

\item \emph{The basic Csound C API.} Include \texttt{csound.h} (page \pageref{csound_8h}) and link with \texttt{libcsound.a}. This also includes the Cscore API (see below).

\item \emph{The basic Csound C++ API.} Include \texttt{csound.hpp} (page \pageref{csound_8hpp}) and link with \texttt{libcsound.a}.

\item \emph{The extended Csound C++ API.} Include \texttt{CppSound.hpp} (page \pageref{CppSound_8hpp}) and \texttt{CppSound.hpp} (page \pageref{CsoundFile_8hpp}) and link with \verb|libcsound.a| and \verb|lib_csnd.a|, which adds to the Csound C++ API a CsoundFile class (\ref{classCsoundFile}) for loading, saving, and editing Csound orchestra and score files.

\item \emph{The CsoundAC C++ API.} Include \texttt{CsoundAC.hpp} (page \pageref{CsoundAC_8hpp}) and link with \verb|libcsound.a|, \verb|lib_csnd.a|, and \verb|libCsoundAC.a|. The \texttt{CsoundAC} class (\ref{classCsoundAC}) contains an instance of the \texttt{CppSound} class (\ref{classCppSound}), which adds to the Csound a basic graphical user interface for editing Csound files and running Csound, and provides a class hierarchy for doing algorithmic composition using Michael Gogins' concept of music graphs (also known as Silence).

\item \emph{The Csound Python API.} Import the \texttt{csnd} Python extension module. This provides a complete Python wrapper for \texttt{csound.hpp} (page \pageref{csound_8hpp}), \texttt{CppSound} (\ref{classCppSound}), and \texttt{CsoundFile} (\ref{classCsoundFile}). The Python API provides a complete Python wrapper for the entire Csound C++ API, and the Csound C++ API reference also serves as a reference to the Python API.

\item \emph{The CsoundAC Python API.} Import the \texttt{CsoundAC} Python extension module. The Python API provides a complete Python wrapper for the entire CsoundAC C++ API, including Silence, and the CsoundAC C++ API reference also serves as a reference to the Python API.

\item \emph{An experimental LISP API.} 

\end{itemize}

\section{An Example Using the Csound API}

The Csound command--line program is itself built using the Csound API. Its code reads in full as follows:

\begin{lstlisting}
#include "csound.h"

int main(int argc, char **argv)
{
    // Create Csound.
    void *csound = csoundCreate(0);
    // One complete performance cycle.
    int result = csoundCompile(csound, argc, argv);
    if(!result)
    {
        while(csoundPerformKsmps(csound) == 0){}
        csoundCleanup(csound);
    }
    // Destroy Csound.
    csoundDestroy(csound);
    return result;
}
\end{lstlisting}

\section{An Example Using the CsoundAC C++ API}

CsoundAC extends the Csound API with C++. There is a C++ class for the Csound API proper, another C++ class for manipulating Csound files in code, and additional classes for algorithmic composition based on music space. All these C++ classes also have a Python interface in the \texttt{CsoundAC} Python extension module.

You can build CsoundAC into your own software using the \texttt{CsoundAC} shared library and \texttt{CsoundAC.hpp} header file. 

\section{Cscore}

Beginning with Csound 5, all of the Cscore functions described in the
manual are now part of the Csound API, and they can be called from a program
that calls the Csound library.  

All of the CScore functions are renamed in the Csound API. For example, \texttt{createv()} is now
\texttt{cscoreCreateEvent()}, and \texttt{lcopy()} is now \texttt{cscoreListCopy()}.  In addition, each
function takes an additional first parameter that is a pointer to a \texttt{CSOUND}
instance.  You can find the details in the header file, \url{cscore.h}, which may
be included with your Csound distribution, or if not, can be found in Csound CVS on SourceForge.

Before you can use any of the Cscore API functions, you must create a \texttt{CSOUND}
instance and initialize Cscore by calling \texttt{csoundInitializeCscore()} -- see
\url{csound.h} for an explanation.  An example main program that does all of this
can be found in Csound CVS on SourceForge in \url{Top/cscormai.c}.  You should add a
function called \texttt{cscore()} with your own score-processing code.  An example
that does nothing except write the score back out unchanged can be found in the file
\url{Top/cscore_internal.c}.  

To create your own standalone Cscore program, you must
compile \url{cscormai.c} (or your own main program) and the file containing your
\texttt{cscore()} function, and link them with the Csound API library.

Everything that can be done using C as in the above examples can also be done in a similar manner in Python or any of the other Csound API languages.

\part{API Reference}

